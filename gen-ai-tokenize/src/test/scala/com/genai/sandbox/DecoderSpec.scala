package com.genai.sandbox

import com.genai.sandbox
import com.genai.sandbox.*
import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.should

import scala.collection.immutable.ListMap


class DecoderSpec extends AnyFlatSpec with should.Matchers with BaseSpec {

  // Set up the test data
  val (seqs, mergedPairs) = Tokenizer.mergeTokens(4, unsignedValues, maxId)
  val updatedVocab: Map[Int, Array[Int]] = sandbox.updatedVocab(mergedPairs)

  "Decoder#decode" should "decode the input token id to string representation" in {
    val decodedText = Decoder(updatedVocab).decode(unsignedValues)
    assert(inputText == decodedText)
  }
}
